@page "/miseventos"
@using CentroEventos.Aplicacion.Entidades;
@using CentroEventos.Aplicacion.CasosDeUso;
@rendermode InteractiveServer
@inject EliminarEventoDeportivo eliminarEventoDeportivo
@inject ObtenerTodosEventosDeportivos obtenerEventosDeportivos

<PageTitle>Mis Eventos</PageTitle>

<h1>Mis Eventos</h1>

@if (miseventos == null)
{
    <p><em>No Tenés ninguna reserva.</em></p>
}
<table class="table">
   <thead>
       <tr>
           <th>ID</th>
           <th>NOMBRE</th>
           <th>DESCRIPCION</th>
           <!--<th>INICIO</th> -->
           <!--<th>DURACION</th> -->
           <!--<th>CUPOMAXIMO</th> -->
           <!--<th>RESPONSABLEID</th> -->
           <!-- Este es un comentario HTML -->
       </tr>
   </thead>
   <tbody>
       @foreach (var evento in miseventos)
       {
           <tr>
               <td>@evento.ID</td>
               <td>@evento.Nombre</td>
               <td>@evento.Descripcion</td>
               <!--Agregar Otro Campos-->
               <td> 
                <button class="btn btn-primary">
                    Editar
                </button>
                <button class="btn btn-danger" @onclick="()=>ConfirmarEliminacion(evento)">
                    Eliminar
                </button>
               </td>
           </tr>
       }
   </tbody>
</table>
@code {
    List<EventoDeportivo> miseventos = new List<EventoDeportivo>();
    protected override void OnInitialized()
    {
        miseventos = obtenerEventosDeportivos.Ejecutar().ToList(); //Porque hace falta añadir el toList?
    }
    DialogoConfirmacion dialogo=null!;
    EventoDeportivo? _EventoParaEliminar = null;
    private void ConfirmarEliminacion(EventoDeportivo eve)
    {
        _EventoParaEliminar = eve;
       // dialogo.Mensaje = $"¿Está seguro que desea eliminar el evento deportivo {eve.Nombre}?";
       //Modificique el codigo de DialogoConfirmacion para que reciba el mensaje como parametro
        dialogo.Mostrar($"¿Está seguro que desea eliminar el evento deportivo {eve.Nombre}?");
    }
    private void Eliminar()
    {
        if (_EventoParaEliminar != null)
        {
            eliminarEventoDeportivo.Ejecutar(_EventoParaEliminar.ID);
            miseventos= obtenerEventosDeportivos.Ejecutar().ToList();
        }

    }

}
